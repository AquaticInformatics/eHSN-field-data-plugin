# eHSN plugin notes

## Recommended upload format

All AQUARIUS Time-Series field data plugins can accept input in one of two formats:
- **Simple** - Just the file format parsed directly by the plugin
- [**Zip-with-attachments**](https://github.com/AquaticInformatics/aquarius-field-data-framework/tree/master/docs#uploading-field-data-with-attachments) - A ZIP archive containing the simple file, plus extra files to attach to the created visit.

For eHSN uploads, the **ZIP-with-attachments** format is recommended, to easily bring in related data files.

The ZIP archive should contain:
- The eHSN XML file at the root
- All other attachments in one or more subfolders within the ZIP.
    - The eHSN full PDF report, generated by selecting the `File | Generate PDF - Complete Note on Full Page` menu item of the eHSN desktop application.
    - Any files imported into the eHSN desktop application's `Import` menu (eg. HFC, FlowTracker, QRev, SxS Pro, etc.)
    - Any other images taken while performing the field visit on site

### A sample eHSN visit

This ZIP file for the 2018-Dec-15 visit to the 07QC008 site includes the eHSN XML file, the generated PDF, two pictures, and a FlowTracker2 file used to create the mid-section measurement.

The `07QC008_20181215_FV.zip` file contains these 5 five files, 4 of which are in an "Attachments" subfolder within the ZIP archive. The name of the subfolder is not important.

```
07QC008_20181215_FV.xml
Attachments/07QC008_20181215_FV_VIEW.pdf
Attachments/IMG_3485.JPG
Attachments/IMG_3486.JPG
Attachments/07QC008_20181215.ft
```

# Data imported into AQTS

| eHSN tab | eHSN section | eHSN property | AQTS tab | AQTS section | AQTS property |
| --- | --- | --- | --- | --- |
| Front Page | | Party | Visit Summary | | Party |
| Front Page | Discharge Measurements | Control Condition | Control Condition | | Control Condition |
| | | Control Condition Remarks | Control Condition | | Comments |
| | | Start Time | Discharge Summary | Description | Start Time |
| | | End Time | Discharge Summary | Description | End Time |
| | | Air Temp | Readings | | **ParameterId**=TA (Air Temp) |
| | | Water Temp | Readings | | **ParameterId**=TW (Water Temp) |
| | | Discharge | Discharge Section | Description | Discharge |
| | | Width | Discharge Section | Channel Observations | Width |
| | | Area | Discharge Section | Channel Observations | Area |
| | | Mean Velocity | Discharge Section | Channel Observations | Velocity Average |
| | | M. G. H. | Discharge Summary |  Mean Gage Height | Mean Gage Height |
| | | Discharge Activity Remarks | Discharge Summary | Measurement Calculation | Comments |
| | | Discharge Activity Remarks | Discharge Section | Description | Comments |
| Front Page | Stage Measurements | Aggregated stage values | Discharge Summary | Mean Gage Height | Included Measurements |
| | | Non-aggregated stage values | Readings | | ParameterId=HG |
| | | Stage Activity Summary Remarks | Discharge Summary | Measurement Calculations | Comments |
| Front Page | Environmental Conditions | Cloud Cover<br/>Precipitation<br/>Wind Conditions<br/>Wind Speed<br/>Wind Direction | Visit Summary | | Weather |
|  | | Wind Speed | Readings | | **ParameterId**=US (Wind Velocity) |
|  | | Battery Voltage | Readings | | **ParameterId**=VB (Voltage) |
|  | | Station Health Remarks | Visit Summary | | Comments |
| Front Page | Instrument Deployment | Deployment Method | Discharge Section<br/>ADCP | Technology | Deployment Method |
| | | Instrument Type | ADCP | Technology | Device Type |
| | | Manufacturer<br/>Model<br/>Serial/Meter Number<br/>Firmware<br/>Software | | Technology | Manufacturer<br/>Model<br/>Serial Number<br/>Firmware Version<br/>Software Version |
| | | ADCP Depth | | Discharge Calculation Technique | Transducer Depth |
| | | Magnetic Declination | | | Magnetic Variation |
| Level Notes | Direct Water Level Table | Surge/Comment | Level Survey | | Comments |
| | | Surveyed by | | | Party |
| | | Comments | | | Comments |
| | | Establish Elevation | | Measured Levels | Measured Elevation |
| | | Surge/Comment | | | Comments |
| Moving Boat | | Depth Ref. | ADCP | Discharge Calculation Technique | Depth Reference |
| | | # of checked transect rows | | | Number of Transects |
| | Velocity Extrapolation Method | Top | | | Top Estimate Method |
| | | Bottom | | | Bottom Estimate Method |
| | | Exponent | | | Bottom Estimate Exponent |
| | | Comments | | Description | Comments |
| | | Bed Material | | Channel Observations | Channel Material |
| Mid-section | | | Discharge Section | Description | **Discharge Method**=Mid-Section |
| | Meter Information | Meter No.<br/>Calibration Date | | Technology | Primary Current Meter |
| | Measurement Summary | Deployment Type | | | Deployment Type |
| | Panel Table | Starting Edge Bank | | Discharge Calculation Technique | Starting Point |
| | | Each panel row | | Manual Gauging - Mid-Section Method | panel rows |
| Field Review | | Notes on Site Conditions Affecting Measurement Quality | Visit Summary | | Comments |
